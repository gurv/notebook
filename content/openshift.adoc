= OpenShift

```
# Установка (ArchLinux и КVM)
#
# Setting Up the Virtualization Environment
#   (https://docs.okd.io/latest/minishift/getting-started/setting-up-virtualization-environment.html)
sudo pacman -S libvirt qemu dnsmasq ebtables
sudo usermod -a -G kvm,libvirt $(whoami)
sudo sed -ri 's/.?group\s?=\s?".+"/group = "kvm"/1' /etc/libvirt/qemu.conf
newgrp libvirt
# docker-machine-driver-kvm (root)
curl -L https://github.com/dhiltgen/docker-machine-kvm/releases/download/v0.10.0/docker-machine-driver-kvm-centos7 -o /usr/local/bin/docker-machine-driver-kvm
chmod +x /usr/local/bin/docker-machine-driver-kvm
# libvirtd
systemctl is-active libvirtd
sudo systemctl start libvirtd
# network
sudo virsh net-list --all
sudo virsh net-start default
sudo virsh net-autostart default
#
# Installing Minishift
#   (https://docs.okd.io/latest/minishift/getting-started/installing.html)
#
wget https://github.com/minishift/minishift/releases/download/v1.33.0/minishift-1.33.0-linux-amd64.tgz
tar zxvf minishift-1.33.0-linux-amd64.tgz
chmod +x minishift-1.33.0-linux-amd64/minishift
ln -sf /opt/app/minishift-1.33.0-linux-amd64.tgz/minishift /opt/app/minishift
minishift version
minishift start --skip-registration
#   по умолчанию, пользователь developer, пароль любой

# переменные окружения: MINISHIFT_HOME, MINISHIFT_USERNAME, MINISHIFT_PASSWORD
# конфигурация
minishift config set memory 16g
# registry
oc adm registry --help

# docker
eval $(minishift docker-env)

# мб пригодится
export HELM_HOST="$(minishift ip):$(oc get svc/tiller -o jsonpath='{.spec.ports[0].nodePort}' -n kube-system --as=system:admin)"
export MINISHIFT_ADMIN_CONTEXT="default/$(oc config view -o jsonpath='{.contexts[?(@.name=="minishift")].context.cluster}')/system:admin"

# kube-dashboard
minishift addons install /opt/tmp/minishift-addons/add-ons/kube-dashboard/
minishift addons apply kube-dashboard
minishift addons enable kube-dashboard
oc delete project/kube-dashboard --as=system:admin

# ...
minishift stop
minishift delete
minishift start --skip-registration --memory=16g
minishift openshift service dashboard -n kube-dashboard
kubectl get services --all-namespaces --as=system:admin
docker version

# удалить
minishift delete
rm -rf ~/.minishift

# если висит minishift stop
ps -ef | grep shift
kill 11738

# Reuse the Minishift Docker daemon
eval $(minishift docker-env)
docker ps

# Log into the OpenShift Docker registry
docker login -u developer -p $(oc whoami -t) $(minishift openshift registry)
```
